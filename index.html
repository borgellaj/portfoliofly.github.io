<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio Fly Labs â€¢ Golden 20 Discovery Cohort</title>
  <meta name="description" content="Portfolio Fly Labs Golden 20 â€” non-custodial educational discovery cohort." />
  <style>
    :root{--black:#0b0b0c;--white:#ffffff;--orange:#ff7a18;--gold:#ffd140;--border:#1f2937;--muted:#9ca3af}
    html,body{margin:0;background:var(--black);color:var(--white);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    a{color:var(--gold);text-decoration:none} a:hover{text-decoration:underline}
    .header{position:sticky;top:0;z-index:10;display:flex;gap:12px;align-items:center;padding:16px 20px;border-bottom:1px solid var(--border);background:#0b0b0c}
    .logo{height:34px}
    .brand{font-weight:700;color:var(--orange);text-transform:uppercase;letter-spacing:.02em}
    .container{max-width:1000px;margin:0 auto;padding:20px}
    .section{padding:42px 0}
    .card{background:linear-gradient(180deg,#121212,#0d0d0d);border:1px solid var(--border);border-radius:14px;padding:20px}
    h1{font-size:clamp(2rem,4vw,3rem);margin:.4rem 0 1rem}
    h2{font-size:clamp(1.35rem,2.4vw,2rem);margin:0 0 1rem}
    .small{color:#cfcfcf}
    /* form */
    .form{display:grid;gap:14px}
    .row{display:grid;gap:12px}
    .row.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    @media(max-width:760px){.row.cols-2{grid-template-columns:1fr}}
    .field{position:relative;background:#0e0f12;border:1px solid var(--border);border-radius:12px;padding:12px 12px 6px;transition:border-color .2s}
    .field:focus-within{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.2)}
    .label{position:absolute;top:8px;left:10px;color:#9ea3ad;font-size:12px}
    .field input,.field select{width:100%;background:transparent;color:#e5e7eb;border:0;outline:0;padding-top:14px;font-size:15px}
    .checkbox{display:flex;gap:10px;align-items:flex-start}
    .btn{display:inline-flex;align-items:center;justify-content:center;background:linear-gradient(180deg,var(--orange),#d34f00);color:#111;border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .notice{font-size:.95rem;color:#9ee89e;display:none;margin-top:8px}
    /* paywall curtain */
    #paywall{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.55);backdrop-filter:blur(2px);border-radius:12px}
  </style>
</head>
<body>
  <header class="header">
    <svg class="logo" viewBox="0 0 100 100" aria-hidden="true"><circle cx="50" cy="50" r="48" stroke="#ff7a18" stroke-width="4" fill="none"/><path d="M25 60 L50 25 L75 60 Z" fill="#ff7a18"/></svg>
    <div class="brand">Portfolio Fly Labs</div>
  </header>

  <main class="container">
    <section class="section">
      <h1>Golden 20 Discovery Cohort</h1>
      <p class="small">Non-custodial â€¢ Regulator-ready â€¢ Educational discovery. Keep full custody; we provide structure, transparency, and discipline.</p>
    </section>

    <!-- ===================== STEP 1: INTAKE ===================== -->
    <section class="section card" id="intake-card">
      <h2>Step 1 â€” Member Intake (Required)</h2>
      <p class="small">Ties your Golden 20 seat (NDA, Slack, orientation) to the right person even if a spouse or business pays.</p>

      <form id="golden20-intake" class="form"
            method="post"
            action="https://hooks.airtable.com/workflows/v1/genericWebhook/appnU2uh2AEYbY3eb/wflxXasE8gmILqKwO/wtr8QlqsGmwFAuxb0"
            novalidate>
        <input type="hidden" name="enrollment_id" id="enrollment_id" />

        <div class="row cols-2">
          <div class="field"><span class="label">Legal First Name*</span><input name="first_name" autocomplete="given-name" required></div>
          <div class="field"><span class="label">Legal Last Name*</span><input name="last_name" autocomplete="family-name" required></div>
        </div>

        <div class="row cols-2">
          <div class="field"><span class="label">Email*</span><input type="email" name="email" autocomplete="email" required></div>
          <div class="field"><span class="label">Mobile (optional)</span><input name="mobile" inputmode="tel" autocomplete="tel"></div>
        </div>

        <div class="row cols-2">
          <div class="field" style="grid-column:1/-1"><span class="label">Street Address*</span><input name="addr1" autocomplete="address-line1" required></div>
          <div class="field"><span class="label">City*</span><input name="city" autocomplete="address-level2" required></div>
          <div class="field"><span class="label">State*</span><input name="state" autocomplete="address-level1" required></div>
          <div class="field"><span class="label">ZIP*</span><input name="zip" inputmode="numeric" autocomplete="postal-code" required></div>
        </div>

        <div class="row">
          <label class="checkbox">
            <input type="checkbox" id="payer_is_different">
            <span>Payment will be made by a spouse or business (optional)</span>
          </label>
          <div id="payer_block" style="display:none">
            <div class="row cols-2">
              <div class="field"><span class="label">Payer / Business Name</span><input name="payer_display_name" placeholder="e.g., ACME LLC or Spouse Name"></div>
              <div class="field"><span class="label">Payer Email (optional)</span><input type="email" name="payer_email"></div>
            </div>
            <div class="row cols-2">
              <div class="field"><span class="label">Relationship</span>
                <select name="payer_relationship">
                  <option>Business</option><option>Spouse/Partner</option><option>Self</option><option>Other</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="row cols-2">
          <div class="field"><span class="label">IBKR Status</span>
            <select name="ibkr_status">
              <option>Have an IBKR account</option>
              <option>Starting IBKR setup</option>
              <option>Prefer another broker</option>
            </select>
          </div>
        </div>

        <label class="checkbox"><input type="checkbox" required> <span>I certify the above is accurate and I am 18+.</span></label>
        <button type="submit" class="btn">Submit Intake</button>
        <div id="intake_msg" class="notice">âœ… Intake received. Your payment button is unlocked below.</div>
      </form>
    </section>

    <!-- ===================== STEP 2: CONSENT + PAY ===================== -->
    <section class="section card" id="payment-card" style="position:relative">
      <h2>Step 2 â€” Consent & Payment</h2>
      <p class="small">Educational enrollment â€¢ One-time $400 â€¢ NOT an investment/advisory product.</p>

      <div class="card" style="background:#0f0f0f;margin-bottom:12px">
        <h3 style="margin:8px 0 6px">Participant Agreement</h3>
        <p class="small" style="line-height:1.55">
          By clicking <b>Pay Now</b>, you acknowledge: (1) you reviewed the NDA, Risk Disclosure, and Governance Framework;
          (2) this is educational and non-custodial; (3) you consent via electronic signature; (4) you are 18+.
        </p>
        <label class="checkbox"><input type="checkbox" id="consent_checkbox"> <span>I have read and agree to the terms.</span></label>
      </div>

      <!-- Lock overlay -->
      <div id="paywall"><div class="small">ðŸ”’ Complete Step 1 and check the consent box to unlock payment.</div></div>

      <!-- PayPal Hosted Button -->
      <script src="https://www.paypal.com/sdk/js?client-id=BAAkneJQuDWD2PK9No40deT5VMGsJgqop0yjD9Wid5-7mNye-p0x5b3mMeDFlXmc4QokhGU64aPgpSlP-k&components=hosted-buttons&enable-funding=venmo&currency=USD"></script>
      <div id="paypal-container-M8EDTMFED77YG" style="margin-top:8px"></div>
      <script>
        if (window.paypal && paypal.HostedButtons) {
          paypal.HostedButtons({ hostedButtonId: "M8EDTMFED77YG" })
                .render("#paypal-container-M8EDTMFED77YG");
        }
      </script>

      <p class="small" style="margin-top:12px">After payment, youâ€™ll receive a confirmation email within 24 hours with your NDA copy, Slack invite, and orientation details.</p>
      <p class="small">Tip: include your Enrollment ID <b id="eid_view"></b> in your PayPal memo for faster matching.</p>
    </section>
  </main>

  <footer class="container small" style="padding:40px 0;border-top:1px solid var(--border);text-align:center">
    Â© <span id="y"></span> Portfolio Fly Labs â€” Proof of behavior, not exposure.
  </footer>

  <script>
    // ---------- helpers ----------
    const $ = s => document.querySelector(s);

    // EID: persistent for the session
    let eid = localStorage.getItem('g20_eid');
    if (!eid) {
      eid = 'G20-' + Math.random().toString(36).slice(2,8).toUpperCase() + '-' + Date.now();
      try { localStorage.setItem('g20_eid', eid); } catch(_) {}
    }
    $('#enrollment_id').value = eid;
    $('#eid_view').textContent = eid;

    // Payer toggle
    $('#payer_is_different')?.addEventListener('change', e=>{
      $('#payer_block').style.display = e.target.checked ? 'block' : 'none';
    });

    // Unlock logic
    const paywall = $('#paywall');
    const consent = $('#consent_checkbox');
    function maybeUnlock(){
      const ok = localStorage.getItem('g20_intake_ok') === '1' && consent?.checked;
      paywall.style.display = ok ? 'none' : 'flex';
    }
    consent?.addEventListener('change', maybeUnlock);

    // Float label styling (optional)
    document.querySelectorAll('.field input, .field select').forEach(el=>{
      const f = el.closest('.field');
      const t = ()=>{ /* cosmetic only */ };
      ['change','input','blur'].forEach(ev=>el.addEventListener(ev,t));
      t();
    });

    // ---------- INTAKE SUBMIT (Option A: no-cors) ----------
    const form = $('#golden20-intake');
    form?.addEventListener('submit', async (e)=>{
      e.preventDefault();

      const fd = new FormData(form);
      fd.set('enrollment_id', eid);

      try {
        // NOTE: no-cors => opaque response (canâ€™t check status)
        await fetch(form.action, { method:'POST', body: fd, mode:'no-cors' });

        // Assume success and proceed
        localStorage.setItem('g20_intake_ok','1');
        $('#intake_msg').style.display = 'block';
        maybeUnlock();

        // Smooth-scroll to payment
        $('#payment-card').scrollIntoView({ behavior:'smooth', block:'start' });

        alert('âœ… Intake recorded. Review consent and proceed to payment.');
      } catch(err){
        alert('We could not record your intake. Please try again or contact support.');
      }
    });

    // initial state
    maybeUnlock();
    $('#y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
